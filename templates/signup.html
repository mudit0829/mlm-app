<!DOCTYPE html>
<html>
<head>
  <title>TradeEra - Registration</title>
  <style>
    body { background: #112120; color: #fff; font-family: Arial, sans-serif; }
    #formBox { background: #193a37; margin: 40px auto; width: 440px; padding: 32px 28px; border-radius: 10px; box-shadow: 0 0 24px #0004; }
    h2 { text-align:center; font-weight:bold; margin-bottom: 18px; }
    label { display:block; margin: 14px 0 4px; }
    input, select { width:100%; padding:10px; margin:6px 0 12px; border: 1px solid #ddd; background:#113327; color:#fafafa;}
    button { padding:12px 30px; background:#ff8c21; color:#fff; border:none; font-size:1em; border-radius:6px; cursor:pointer;}
  </style>
</head>
<body>
  <div id="formBox">
    <h2>TradeEra Registration</h2>
    <form id="signupForm">
      <label>Referral Code (User ID):</label>
      <input name="referral_code" required>

      <label>Select Position:</label>
      <select name="position" required>
        <option value="LEFT">LEFT</option>
        <option value="RIGHT">RIGHT</option>
      </select>

      <label>Enter Username:</label>
      <input name="username" required>

      <label>Enter Password:</label>
      <input name="password" type="password" required>

      <label>First Name:</label>
      <input name="first_name" required>

      <label>Last Name:</label>
      <input name="last_name" required>

      <label>Email:</label>
      <input name="email" type="email" required>

      <label>Date of Birth (DOB):</label>
      <input name="dob" type="date" required>

      <label>Country:</label>
      <input name="country" required>

      <label>Mobile Number:</label>
      <input name="mobile" required>

      <label>State:</label>
      <input name="state" required>

      <button type="submit">Register</button>
    </form>
  </div>
  <script>
    document.getElementById('signupForm').onsubmit = async (e) => {
      e.preventDefault();
      let obj = {};
      Array.from(e.target.elements).forEach(el => { if(el.name) obj[el.name] = el.value; });
      let res = await fetch('/signup', {
        method: 'POST',
        headers: {'Content-Type':'application/json'},
        body: JSON.stringify(obj)
      });
      let data = await res.json();
      if (data.user_id) {
        alert('Registration successful! Please note your User ID: ' + data.user_id);
        window.location.href = '/'; // Redirect to login
      } else {
        alert(data.message);
      }
    };
  </script>
</body>
</html>
